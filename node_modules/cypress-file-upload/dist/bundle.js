var e,t=require("path"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("mime"),o=Object.freeze({subjectType:"input",force:!1,allowEmpty:!1}),i=Object.freeze({INPUT:"input",DRAG_N_DROP:"drag-n-drop"}),s={};s[i.INPUT]=["change"],s[i.DRAG_N_DROP]=["dragstart","drag","dragenter","drop","change","dragleave","dragend"];var a={message:'"subjectType" is not valid',tip:'Please look into docs to find supported "subjectType" values'},l={message:'"force" is not valid',tip:'Please look into docs to find supported "force" values'},c={message:'"allowEmpty" is not valid',tip:'Please look into docs to find supported "allowEmpty" values'},f={message:'"file encoding" is not valid',tip:'Please look into docs to find supported "encoding" values'},p={message:'"filePath" is not valid',tip:'Please look into docs to find supported "filePath" values'},u={message:'"mimeType" is not valid',tip:'Please look into docs to find supported "mimeType" values'},m={message:"given fixture file is empty",tip:'Please make sure you provide correct file or explicitly set "allowEmpty" to true'},d=function(e){function t(r){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];e.apply(this,n),e.captureStackTrace&&e.captureStackTrace(this,t),this.name="[cypress-file-upload error]",this.message=r.message+".\n"+r.tip}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),y=Object.freeze({ASCII:"ascii",BASE64:"base64",BINARY:"binary",HEX:"hex",LATIN1:"latin1",UTF8:"utf8",UTF_8:"utf-8",UCS2:"ucs2",UCS_2:"ucs-2",UTF16LE:"utf16le",UTF_16LE:"utf-16le"}),T=Object.freeze({JSON:"json",JS:"js",COFFEE:"coffee",HTML:"html",TXT:"txt",CSV:"csv",PNG:"png",JPG:"jpg",JPEG:"jpeg",GIF:"gif",TIF:"tif",TIFF:"tiff",ZIP:"zip",PDF:"pdf",VCF:"vcf",SVG:"svg",XLS:"xls",XLSX:"xlsx"}),v=Object.values(y),g={};g[y.ASCII]=function(e){return Cypress.Promise.resolve(e)},g[y.BASE64]=function(e,t){return Cypress.Blob.base64StringToBlob(e,t)},g[y.BINARY]=function(e,t){return Cypress.Blob.binaryStringToBlob(e,t)},g[y.HEX]=function(e){return Cypress.Promise.resolve(e)},g[y.LATIN1]=function(e){return Cypress.Promise.resolve(e)},g[y.UTF8]=function(e){return Cypress.Promise.resolve(e)},g[y.UTF_8]=function(e){return Cypress.Promise.resolve(e)},g[y.UCS2]=function(e){return Cypress.Promise.resolve(e)},g[y.UCS_2]=function(e){return Cypress.Promise.resolve(e)},g[y.UTF16LE]=function(e){return Cypress.Promise.resolve(e)},g[y.UTF_16LE]=function(e){return Cypress.Promise.resolve(e)};var h={};h[T.JSON]=y.UTF8,h[T.JS]=y.UTF8,h[T.COFFEE]=y.UTF8,h[T.HTML]=y.UTF8,h[T.TXT]=y.UTF8,h[T.CSV]=y.UTF8,h[T.PNG]=y.BASE64,h[T.JPG]=y.BASE64,h[T.JPEG]=y.BASE64,h[T.GIF]=y.BASE64,h[T.TIF]=y.BASE64,h[T.TIFF]=y.BASE64,h[T.ZIP]=y.BASE64,h[T.PDF]=y.UTF8,h[T.VCF]=y.UTF8,h[T.SVG]=y.UTF8,h[T.XLS]=y.BINARY,h[T.XLSX]=y.BINARY;var P=y.UTF8;Cypress.Commands.add("attachFile",{prevSubject:!0},function(e,y,T){var b,E,F=(void 0===(b=T)&&(b={}),void 0===(E=o)&&(E={}),Object.assign({},E,b)),C=F.subjectType,S=F.force,w=F.allowEmpty;!function(e){var t=e.subjectType,r=e.force,n=e.allowEmpty;if(-1===Object.values(i).indexOf(t))throw new d(a);if("boolean"!=typeof r)throw new d(l);if("boolean"!=typeof n)throw new d(c)}({subjectType:C,force:S,allowEmpty:w});var U,j="string"==typeof(U=y)?{filePath:U,encoding:"",mimeType:""}:{filePath:U.filePath,encoding:U.encoding||"",mimeType:U.mimeType||""};!function(e){var t=j.filePath,r=j.encoding,n=j.mimeType;if(r&&!v.includes(r))throw new d(f);if("string"!=typeof t)throw new d(p);if("string"!=typeof n)throw new d(u)}();var I=j.filePath,A=j.encoding,B=j.mimeType||function(e){var r=t.extname(e).slice(1);return n.getType(r)}(I),N=A||function(e){var r=t.extname(e).slice(1);return h[r]||P}(I),O=S||function(e){return!("chrome"===(t=Cypress.browser).name&&t.majorVersion<73&&function(e){if(!e)throw new Error("Element cannot be empty");return Cypress.dom.isAttached(e)&&Cypress.dom.isVisible(e)}(e))||function(e){if(!e)throw new Error("Element cannot be empty");return Cypress.dom.isDetached(e)}(e);var t}(e);return Cypress.cy.fixture(I,N).then(function(t){return function(e){var t=e.fileContent,n=e.mimeType,o=e.encoding,i=r.basename(e.filePath);return(0,g[o])(t,n).then(function(e){return new File([e],i,{type:n})})}({filePath:I,fileContent:t,mimeType:B,encoding:N}).then(function(t){(function(e,t){if(!t&&0===e.size)throw new d(m)})(t,w),function(e,t){var r=t.file,n=t.subjectType,o=t.force,a=new DataTransfer;if(a.items.add(r),n===i.INPUT){var l=e[0];l.files&&l.files.length>0&&Array.prototype.forEach.call(l.files,function(e){return a.items.add(e)}),l.files=a.files}if(o){var c={bubbles:!0,cancelable:!0,detail:a};s[n].forEach(function(t){var r=new CustomEvent(t,c);Object.assign(r,{dataTransfer:a}),e[0].dispatchEvent(r)})}}(e,{file:t,subjectType:C,force:O}),Cypress.log({name:"attachFile",displayName:"FILE",message:t.name})})}),Cypress.cy.wrap(e,{log:!1})});
//# sourceMappingURL=bundle.js.map
